{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\ryosh\\\\OneDrive\\\\Desktop\\\\warehouse locator\\\\src\\\\components\\\\EnhancedMapComponent.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useRef, useState } from 'react';\nimport { motion } from 'framer-motion';\nimport L from 'leaflet';\nimport 'leaflet/dist/leaflet.css';\nimport { MapPin, Warehouse, Navigation, Zap, Target, Layers, ZoomIn, ZoomOut, RotateCcw } from 'lucide-react';\n\n// Custom marker icons\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst createCustomIcon = (color, iconType) => {\n  const iconHtml = `\n    <div style=\"\n      background: linear-gradient(135deg, ${color} 0%, ${color}dd 100%);\n      width: 32px;\n      height: 32px;\n      border-radius: 50%;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      border: 3px solid white;\n      box-shadow: 0 4px 12px rgba(0,0,0,0.3);\n      position: relative;\n    \">\n      <div style=\"\n        width: 16px;\n        height: 16px;\n        background: white;\n        border-radius: 50%;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n      \">\n        ${iconType === 'store' ? 'üè™' : 'üè≠'}\n      </div>\n    </div>\n    <div style=\"\n      position: absolute;\n      top: 32px;\n      left: 50%;\n      transform: translateX(-50%);\n      width: 0;\n      height: 0;\n      border-left: 8px solid transparent;\n      border-right: 8px solid transparent;\n      border-top: 12px solid ${color};\n      filter: drop-shadow(0 2px 4px rgba(0,0,0,0.2));\n    \"></div>\n  `;\n  return L.divIcon({\n    html: iconHtml,\n    className: 'custom-div-icon',\n    iconSize: [32, 44],\n    iconAnchor: [16, 44],\n    popupAnchor: [0, -44]\n  });\n};\nconst EnhancedMapComponent = ({\n  stores = [],\n  optimalWarehouse = null,\n  mapView = 'satellite',\n  onStoreClick,\n  onMapClick\n}) => {\n  _s();\n  const mapRef = useRef(null);\n  const mapInstanceRef = useRef(null);\n  const markersRef = useRef([]);\n  const [currentZoom, setCurrentZoom] = useState(10);\n  const [mapCenter, setMapCenter] = useState([22.5726, 88.3639]); // Default to Kolkata\n  const [isLoading, setIsLoading] = useState(true);\n  const [mapError, setMapError] = useState(null);\n\n  // Map tile layers\n  const tileLayers = {\n    street: 'https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',\n    satellite: 'https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}',\n    terrain: 'https://{s}.tile.opentopomap.org/{z}/{x}/{y}.png'\n  };\n\n  // Initialize map\n  useEffect(() => {\n    if (!mapRef.current) return;\n    try {\n      // Create map instance\n      const map = L.map(mapRef.current, {\n        center: mapCenter,\n        zoom: currentZoom,\n        zoomControl: false,\n        attributionControl: false\n      });\n\n      // Add tile layer\n      L.tileLayer(tileLayers[mapView], {\n        attribution: '¬© OpenStreetMap contributors',\n        maxZoom: 18\n      }).addTo(map);\n\n      // Map event listeners\n      map.on('zoomend', () => {\n        setCurrentZoom(map.getZoom());\n      });\n      map.on('moveend', () => {\n        const center = map.getCenter();\n        setMapCenter([center.lat, center.lng]);\n      });\n      map.on('click', e => {\n        if (onMapClick) {\n          onMapClick(e.latlng);\n        }\n      });\n      mapInstanceRef.current = map;\n      setIsLoading(false);\n\n      // Cleanup function\n      return () => {\n        if (mapInstanceRef.current) {\n          mapInstanceRef.current.remove();\n          mapInstanceRef.current = null;\n        }\n      };\n    } catch (error) {\n      console.error('Map initialization error:', error);\n      setMapError('Failed to load map');\n      setIsLoading(false);\n    }\n  }, []);\n\n  // Update tile layer when mapView changes\n  useEffect(() => {\n    if (!mapInstanceRef.current) return;\n    mapInstanceRef.current.eachLayer(layer => {\n      if (layer instanceof L.TileLayer) {\n        mapInstanceRef.current.removeLayer(layer);\n      }\n    });\n    L.tileLayer(tileLayers[mapView], {\n      attribution: '¬© OpenStreetMap contributors',\n      maxZoom: 18\n    }).addTo(mapInstanceRef.current);\n  }, [mapView]);\n\n  // Update markers when stores change\n  useEffect(() => {\n    if (!mapInstanceRef.current) return;\n\n    // Clear existing markers\n    markersRef.current.forEach(marker => {\n      mapInstanceRef.current.removeLayer(marker);\n    });\n    markersRef.current = [];\n\n    // Add store markers\n    stores.forEach((store, index) => {\n      const marker = L.marker([store.lat, store.lng], {\n        icon: createCustomIcon('#6366f1', 'store')\n      }).addTo(mapInstanceRef.current);\n      const popupContent = `\n        <div style=\"min-width: 200px; padding: 8px;\">\n          <h3 style=\"color: #1f2937; margin: 0 0 8px 0; font-size: 16px;\">\n            ${store.name}\n          </h3>\n          <p style=\"color: #6b7280; margin: 4px 0; font-size: 14px;\">\n            <strong>Location:</strong> ${store.city}\n          </p>\n          <p style=\"color: #6b7280; margin: 4px 0; font-size: 14px;\">\n            <strong>Daily Demand:</strong> ${store.demand} units\n          </p>\n          <p style=\"color: #6b7280; margin: 4px 0; font-size: 12px;\">\n            <strong>Coordinates:</strong> ${store.lat.toFixed(4)}, ${store.lng.toFixed(4)}\n          </p>\n        </div>\n      `;\n      marker.bindPopup(popupContent);\n      marker.on('click', () => {\n        if (onStoreClick) {\n          onStoreClick(store);\n        }\n      });\n      markersRef.current.push(marker);\n    });\n\n    // Add optimal warehouse marker if exists\n    if (optimalWarehouse) {\n      var _optimalWarehouse$cos;\n      const warehouseMarker = L.marker([optimalWarehouse.lat, optimalWarehouse.lng], {\n        icon: createCustomIcon('#ec4899', 'warehouse')\n      }).addTo(mapInstanceRef.current);\n      const warehousePopup = `\n        <div style=\"min-width: 200px; padding: 8px;\">\n          <h3 style=\"color: #1f2937; margin: 0 0 8px 0; font-size: 16px;\">\n            üè≠ Optimal Warehouse Location\n          </h3>\n          <p style=\"color: #6b7280; margin: 4px 0; font-size: 14px;\">\n            <strong>Estimated Cost:</strong> ‚Çπ${(_optimalWarehouse$cos = optimalWarehouse.cost) === null || _optimalWarehouse$cos === void 0 ? void 0 : _optimalWarehouse$cos.toLocaleString()}\n          </p>\n          <p style=\"color: #6b7280; margin: 4px 0; font-size: 14px;\">\n            <strong>Avg Distance:</strong> ${optimalWarehouse.avgDistance} km\n          </p>\n          <p style=\"color: #6b7280; margin: 4px 0; font-size: 14px;\">\n            <strong>Efficiency:</strong> ${optimalWarehouse.efficiency}%\n          </p>\n          <p style=\"color: #6b7280; margin: 4px 0; font-size: 12px;\">\n            <strong>Coordinates:</strong> ${optimalWarehouse.lat.toFixed(4)}, ${optimalWarehouse.lng.toFixed(4)}\n          </p>\n        </div>\n      `;\n      warehouseMarker.bindPopup(warehousePopup);\n      markersRef.current.push(warehouseMarker);\n\n      // Draw lines from warehouse to all stores\n      stores.forEach(store => {\n        const line = L.polyline([[optimalWarehouse.lat, optimalWarehouse.lng], [store.lat, store.lng]], {\n          color: '#ec4899',\n          weight: 2,\n          opacity: 0.7,\n          dashArray: '5, 10'\n        }).addTo(mapInstanceRef.current);\n        markersRef.current.push(line);\n      });\n    }\n\n    // Auto-fit bounds if there are stores\n    if (stores.length > 0) {\n      const group = new L.featureGroup(markersRef.current.filter(marker => marker instanceof L.Marker));\n      mapInstanceRef.current.fitBounds(group.getBounds().pad(0.1));\n    }\n  }, [stores, optimalWarehouse]);\n\n  // Map control functions\n  const zoomIn = () => {\n    if (mapInstanceRef.current) {\n      mapInstanceRef.current.zoomIn();\n    }\n  };\n  const zoomOut = () => {\n    if (mapInstanceRef.current) {\n      mapInstanceRef.current.zoomOut();\n    }\n  };\n  const resetView = () => {\n    if (mapInstanceRef.current && stores.length > 0) {\n      const group = new L.featureGroup(markersRef.current.filter(marker => marker instanceof L.Marker));\n      mapInstanceRef.current.fitBounds(group.getBounds().pad(0.1));\n    }\n  };\n  const focusOnOptimalWarehouse = () => {\n    if (mapInstanceRef.current && optimalWarehouse) {\n      mapInstanceRef.current.setView([optimalWarehouse.lat, optimalWarehouse.lng], 15, {\n        animate: true,\n        duration: 1\n      });\n    }\n  };\n  if (mapError) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"map-error\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"error-content\",\n        children: [/*#__PURE__*/_jsxDEV(Navigation, {\n          size: 48\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 285,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"Map Loading Error\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 286,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: mapError\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 287,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => window.location.reload(),\n          children: [/*#__PURE__*/_jsxDEV(RotateCcw, {\n            size: 16\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 289,\n            columnNumber: 13\n          }, this), \"Retry\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 288,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 284,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 283,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"enhanced-map-container\",\n    children: [isLoading && /*#__PURE__*/_jsxDEV(motion.div, {\n      className: \"map-loading\",\n      initial: {\n        opacity: 0\n      },\n      animate: {\n        opacity: 1\n      },\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"loading-content\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"loading-spinner\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 306,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Loading Interactive Map...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 307,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 305,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 300,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      ref: mapRef,\n      className: `map-instance ${isLoading ? 'loading' : ''}`,\n      style: {\n        height: '100%',\n        width: '100%'\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 312,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"map-controls\",\n      children: [/*#__PURE__*/_jsxDEV(motion.button, {\n        className: \"map-control-btn zoom-in\",\n        onClick: zoomIn,\n        whileHover: {\n          scale: 1.05\n        },\n        whileTap: {\n          scale: 0.95\n        },\n        title: \"Zoom In\",\n        children: /*#__PURE__*/_jsxDEV(ZoomIn, {\n          size: 18\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 327,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 320,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(motion.button, {\n        className: \"map-control-btn zoom-out\",\n        onClick: zoomOut,\n        whileHover: {\n          scale: 1.05\n        },\n        whileTap: {\n          scale: 0.95\n        },\n        title: \"Zoom Out\",\n        children: /*#__PURE__*/_jsxDEV(ZoomOut, {\n          size: 18\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 337,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 330,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(motion.button, {\n        className: \"map-control-btn reset-view\",\n        onClick: resetView,\n        whileHover: {\n          scale: 1.05\n        },\n        whileTap: {\n          scale: 0.95\n        },\n        title: \"Reset View\",\n        children: /*#__PURE__*/_jsxDEV(Target, {\n          size: 18\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 347,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 340,\n        columnNumber: 9\n      }, this), optimalWarehouse && /*#__PURE__*/_jsxDEV(motion.button, {\n        className: \"map-control-btn focus-warehouse\",\n        onClick: focusOnOptimalWarehouse,\n        whileHover: {\n          scale: 1.05\n        },\n        whileTap: {\n          scale: 0.95\n        },\n        title: \"Focus on Optimal Warehouse\",\n        children: /*#__PURE__*/_jsxDEV(Zap, {\n          size: 18\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 358,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 351,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 319,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"map-info\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"map-stats\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"stat\",\n          children: [/*#__PURE__*/_jsxDEV(MapPin, {\n            size: 14\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 367,\n            columnNumber: 13\n          }, this), stores.length, \" Stores\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 366,\n          columnNumber: 11\n        }, this), optimalWarehouse && /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"stat optimal\",\n          children: [/*#__PURE__*/_jsxDEV(Warehouse, {\n            size: 14\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 372,\n            columnNumber: 15\n          }, this), \"Optimal Location Found\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 371,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"stat\",\n          children: [/*#__PURE__*/_jsxDEV(Layers, {\n            size: 14\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 377,\n            columnNumber: 13\n          }, this), mapView.charAt(0).toUpperCase() + mapView.slice(1), \" View\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 376,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 365,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 364,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"style\", {\n      jsx: true,\n      children: `\n        .enhanced-map-container {\n          position: relative;\n          width: 100%;\n          height: 100%;\n          border-radius: 20px;\n          overflow: hidden;\n          border: 1px solid rgba(102, 126, 234, 0.2);\n        }\n\n        .map-loading {\n          position: absolute;\n          top: 0;\n          left: 0;\n          right: 0;\n          bottom: 0;\n          background: rgba(26, 26, 46, 0.95);\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          z-index: 1000;\n        }\n\n        .loading-content {\n          text-align: center;\n          color: white;\n        }\n\n        .loading-spinner {\n          width: 40px;\n          height: 40px;\n          border: 3px solid rgba(102, 126, 234, 0.3);\n          border-top: 3px solid #6366f1;\n          border-radius: 50%;\n          animation: spin 1s linear infinite;\n          margin: 0 auto 1rem;\n        }\n\n        .map-instance.loading {\n          opacity: 0.5;\n        }\n\n        .map-controls {\n          position: absolute;\n          top: 1rem;\n          right: 1rem;\n          display: flex;\n          flex-direction: column;\n          gap: 0.5rem;\n          z-index: 1000;\n        }\n\n        .map-control-btn {\n          width: 40px;\n          height: 40px;\n          background: rgba(255, 255, 255, 0.9);\n          border: none;\n          border-radius: 8px;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          cursor: pointer;\n          transition: all 0.3s ease;\n          color: #374151;\n          box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);\n          backdrop-filter: blur(10px);\n        }\n\n        .map-control-btn:hover {\n          background: rgba(255, 255, 255, 1);\n          box-shadow: 0 4px 12px rgba(0, 0, 0, 0.25);\n        }\n\n        .map-control-btn.focus-warehouse {\n          background: linear-gradient(135deg, #ec4899, #f472b6);\n          color: white;\n        }\n\n        .map-control-btn.focus-warehouse:hover {\n          background: linear-gradient(135deg, #db2777, #ec4899);\n        }\n\n        .map-info {\n          position: absolute;\n          bottom: 1rem;\n          left: 1rem;\n          right: 1rem;\n          z-index: 1000;\n        }\n\n        .map-stats {\n          display: flex;\n          gap: 1rem;\n          flex-wrap: wrap;\n        }\n\n        .stat {\n          background: rgba(255, 255, 255, 0.9);\n          backdrop-filter: blur(10px);\n          padding: 0.5rem 0.75rem;\n          border-radius: 8px;\n          font-size: 0.85rem;\n          font-weight: 500;\n          color: #374151;\n          display: flex;\n          align-items: center;\n          gap: 0.5rem;\n          box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\n        }\n\n        .stat.optimal {\n          background: linear-gradient(135deg, #ec4899, #f472b6);\n          color: white;\n        }\n\n        .map-error {\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          height: 100%;\n          background: rgba(26, 26, 46, 0.95);\n          border-radius: 20px;\n          border: 1px solid rgba(102, 126, 234, 0.2);\n        }\n\n        .error-content {\n          text-align: center;\n          color: white;\n        }\n\n        .error-content h3 {\n          margin: 1rem 0 0.5rem;\n          color: #ef4444;\n        }\n\n        .error-content p {\n          margin-bottom: 1.5rem;\n          color: rgba(255, 255, 255, 0.7);\n        }\n\n        .error-content button {\n          display: flex;\n          align-items: center;\n          gap: 0.5rem;\n          padding: 0.75rem 1.5rem;\n          background: linear-gradient(135deg, #6366f1, #8b5cf6);\n          border: none;\n          border-radius: 8px;\n          color: white;\n          font-weight: 600;\n          cursor: pointer;\n          transition: all 0.3s ease;\n          margin: 0 auto;\n        }\n\n        .error-content button:hover {\n          box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);\n        }\n\n        @keyframes spin {\n          0% { transform: rotate(0deg); }\n          100% { transform: rotate(360deg); }\n        }\n\n        /* Custom Leaflet popup styling */\n        :global(.leaflet-popup-content-wrapper) {\n          background: white;\n          border-radius: 12px;\n          box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);\n          border: 1px solid rgba(102, 126, 234, 0.1);\n        }\n\n        :global(.leaflet-popup-tip) {\n          background: white;\n          border: 1px solid rgba(102, 126, 234, 0.1);\n        }\n\n        :global(.custom-div-icon) {\n          background: transparent !important;\n          border: none !important;\n        }\n\n        @media (max-width: 768px) {\n          .map-controls {\n            top: 0.5rem;\n            right: 0.5rem;\n          }\n\n          .map-control-btn {\n            width: 36px;\n            height: 36px;\n          }\n\n          .map-info {\n            bottom: 0.5rem;\n            left: 0.5rem;\n            right: 0.5rem;\n          }\n\n          .map-stats {\n            gap: 0.5rem;\n          }\n\n          .stat {\n            font-size: 0.8rem;\n            padding: 0.4rem 0.6rem;\n          }\n        }\n      `\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 383,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 298,\n    columnNumber: 5\n  }, this);\n};\n_s(EnhancedMapComponent, \"j6iWhuOJR3rD9XLapqWiEAk0A6o=\");\n_c = EnhancedMapComponent;\nexport default EnhancedMapComponent;\nvar _c;\n$RefreshReg$(_c, \"EnhancedMapComponent\");","map":{"version":3,"names":["React","useEffect","useRef","useState","motion","L","MapPin","Warehouse","Navigation","Zap","Target","Layers","ZoomIn","ZoomOut","RotateCcw","jsxDEV","_jsxDEV","createCustomIcon","color","iconType","iconHtml","divIcon","html","className","iconSize","iconAnchor","popupAnchor","EnhancedMapComponent","stores","optimalWarehouse","mapView","onStoreClick","onMapClick","_s","mapRef","mapInstanceRef","markersRef","currentZoom","setCurrentZoom","mapCenter","setMapCenter","isLoading","setIsLoading","mapError","setMapError","tileLayers","street","satellite","terrain","current","map","center","zoom","zoomControl","attributionControl","tileLayer","attribution","maxZoom","addTo","on","getZoom","getCenter","lat","lng","e","latlng","remove","error","console","eachLayer","layer","TileLayer","removeLayer","forEach","marker","store","index","icon","popupContent","name","city","demand","toFixed","bindPopup","push","_optimalWarehouse$cos","warehouseMarker","warehousePopup","cost","toLocaleString","avgDistance","efficiency","line","polyline","weight","opacity","dashArray","length","group","featureGroup","filter","Marker","fitBounds","getBounds","pad","zoomIn","zoomOut","resetView","focusOnOptimalWarehouse","setView","animate","duration","children","size","fileName","_jsxFileName","lineNumber","columnNumber","onClick","window","location","reload","div","initial","ref","style","height","width","button","whileHover","scale","whileTap","title","charAt","toUpperCase","slice","jsx","_c","$RefreshReg$"],"sources":["C:/Users/ryosh/OneDrive/Desktop/warehouse locator/src/components/EnhancedMapComponent.js"],"sourcesContent":["import React, { useEffect, useRef, useState } from 'react';\r\nimport { motion } from 'framer-motion';\r\nimport L from 'leaflet';\r\nimport 'leaflet/dist/leaflet.css';\r\nimport { \r\n  MapPin, \r\n  Warehouse, \r\n  Navigation, \r\n  Zap, \r\n  Target,\r\n  Layers,\r\n  ZoomIn,\r\n  ZoomOut,\r\n  RotateCcw\r\n} from 'lucide-react';\r\n\r\n// Custom marker icons\r\nconst createCustomIcon = (color, iconType) => {\r\n  const iconHtml = `\r\n    <div style=\"\r\n      background: linear-gradient(135deg, ${color} 0%, ${color}dd 100%);\r\n      width: 32px;\r\n      height: 32px;\r\n      border-radius: 50%;\r\n      display: flex;\r\n      align-items: center;\r\n      justify-content: center;\r\n      border: 3px solid white;\r\n      box-shadow: 0 4px 12px rgba(0,0,0,0.3);\r\n      position: relative;\r\n    \">\r\n      <div style=\"\r\n        width: 16px;\r\n        height: 16px;\r\n        background: white;\r\n        border-radius: 50%;\r\n        display: flex;\r\n        align-items: center;\r\n        justify-content: center;\r\n      \">\r\n        ${iconType === 'store' ? 'üè™' : 'üè≠'}\r\n      </div>\r\n    </div>\r\n    <div style=\"\r\n      position: absolute;\r\n      top: 32px;\r\n      left: 50%;\r\n      transform: translateX(-50%);\r\n      width: 0;\r\n      height: 0;\r\n      border-left: 8px solid transparent;\r\n      border-right: 8px solid transparent;\r\n      border-top: 12px solid ${color};\r\n      filter: drop-shadow(0 2px 4px rgba(0,0,0,0.2));\r\n    \"></div>\r\n  `;\r\n\r\n  return L.divIcon({\r\n    html: iconHtml,\r\n    className: 'custom-div-icon',\r\n    iconSize: [32, 44],\r\n    iconAnchor: [16, 44],\r\n    popupAnchor: [0, -44]\r\n  });\r\n};\r\n\r\nconst EnhancedMapComponent = ({ \r\n  stores = [], \r\n  optimalWarehouse = null, \r\n  mapView = 'satellite',\r\n  onStoreClick,\r\n  onMapClick \r\n}) => {\r\n  const mapRef = useRef(null);\r\n  const mapInstanceRef = useRef(null);\r\n  const markersRef = useRef([]);\r\n  const [currentZoom, setCurrentZoom] = useState(10);\r\n  const [mapCenter, setMapCenter] = useState([22.5726, 88.3639]); // Default to Kolkata\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [mapError, setMapError] = useState(null);\r\n\r\n  // Map tile layers\r\n  const tileLayers = {\r\n    street: 'https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',\r\n    satellite: 'https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}',\r\n    terrain: 'https://{s}.tile.opentopomap.org/{z}/{x}/{y}.png'\r\n  };\r\n\r\n  // Initialize map\r\n  useEffect(() => {\r\n    if (!mapRef.current) return;\r\n\r\n    try {\r\n      // Create map instance\r\n      const map = L.map(mapRef.current, {\r\n        center: mapCenter,\r\n        zoom: currentZoom,\r\n        zoomControl: false,\r\n        attributionControl: false\r\n      });\r\n\r\n      // Add tile layer\r\n      L.tileLayer(tileLayers[mapView], {\r\n        attribution: '¬© OpenStreetMap contributors',\r\n        maxZoom: 18,\r\n      }).addTo(map);\r\n\r\n      // Map event listeners\r\n      map.on('zoomend', () => {\r\n        setCurrentZoom(map.getZoom());\r\n      });\r\n\r\n      map.on('moveend', () => {\r\n        const center = map.getCenter();\r\n        setMapCenter([center.lat, center.lng]);\r\n      });\r\n\r\n      map.on('click', (e) => {\r\n        if (onMapClick) {\r\n          onMapClick(e.latlng);\r\n        }\r\n      });\r\n\r\n      mapInstanceRef.current = map;\r\n      setIsLoading(false);\r\n\r\n      // Cleanup function\r\n      return () => {\r\n        if (mapInstanceRef.current) {\r\n          mapInstanceRef.current.remove();\r\n          mapInstanceRef.current = null;\r\n        }\r\n      };\r\n    } catch (error) {\r\n      console.error('Map initialization error:', error);\r\n      setMapError('Failed to load map');\r\n      setIsLoading(false);\r\n    }\r\n  }, []);\r\n\r\n  // Update tile layer when mapView changes\r\n  useEffect(() => {\r\n    if (!mapInstanceRef.current) return;\r\n\r\n    mapInstanceRef.current.eachLayer((layer) => {\r\n      if (layer instanceof L.TileLayer) {\r\n        mapInstanceRef.current.removeLayer(layer);\r\n      }\r\n    });\r\n\r\n    L.tileLayer(tileLayers[mapView], {\r\n      attribution: '¬© OpenStreetMap contributors',\r\n      maxZoom: 18,\r\n    }).addTo(mapInstanceRef.current);\r\n  }, [mapView]);\r\n\r\n  // Update markers when stores change\r\n  useEffect(() => {\r\n    if (!mapInstanceRef.current) return;\r\n\r\n    // Clear existing markers\r\n    markersRef.current.forEach(marker => {\r\n      mapInstanceRef.current.removeLayer(marker);\r\n    });\r\n    markersRef.current = [];\r\n\r\n    // Add store markers\r\n    stores.forEach((store, index) => {\r\n      const marker = L.marker([store.lat, store.lng], {\r\n        icon: createCustomIcon('#6366f1', 'store')\r\n      }).addTo(mapInstanceRef.current);\r\n\r\n      const popupContent = `\r\n        <div style=\"min-width: 200px; padding: 8px;\">\r\n          <h3 style=\"color: #1f2937; margin: 0 0 8px 0; font-size: 16px;\">\r\n            ${store.name}\r\n          </h3>\r\n          <p style=\"color: #6b7280; margin: 4px 0; font-size: 14px;\">\r\n            <strong>Location:</strong> ${store.city}\r\n          </p>\r\n          <p style=\"color: #6b7280; margin: 4px 0; font-size: 14px;\">\r\n            <strong>Daily Demand:</strong> ${store.demand} units\r\n          </p>\r\n          <p style=\"color: #6b7280; margin: 4px 0; font-size: 12px;\">\r\n            <strong>Coordinates:</strong> ${store.lat.toFixed(4)}, ${store.lng.toFixed(4)}\r\n          </p>\r\n        </div>\r\n      `;\r\n\r\n      marker.bindPopup(popupContent);\r\n      \r\n      marker.on('click', () => {\r\n        if (onStoreClick) {\r\n          onStoreClick(store);\r\n        }\r\n      });\r\n\r\n      markersRef.current.push(marker);\r\n    });\r\n\r\n    // Add optimal warehouse marker if exists\r\n    if (optimalWarehouse) {\r\n      const warehouseMarker = L.marker([optimalWarehouse.lat, optimalWarehouse.lng], {\r\n        icon: createCustomIcon('#ec4899', 'warehouse')\r\n      }).addTo(mapInstanceRef.current);\r\n\r\n      const warehousePopup = `\r\n        <div style=\"min-width: 200px; padding: 8px;\">\r\n          <h3 style=\"color: #1f2937; margin: 0 0 8px 0; font-size: 16px;\">\r\n            üè≠ Optimal Warehouse Location\r\n          </h3>\r\n          <p style=\"color: #6b7280; margin: 4px 0; font-size: 14px;\">\r\n            <strong>Estimated Cost:</strong> ‚Çπ${optimalWarehouse.cost?.toLocaleString()}\r\n          </p>\r\n          <p style=\"color: #6b7280; margin: 4px 0; font-size: 14px;\">\r\n            <strong>Avg Distance:</strong> ${optimalWarehouse.avgDistance} km\r\n          </p>\r\n          <p style=\"color: #6b7280; margin: 4px 0; font-size: 14px;\">\r\n            <strong>Efficiency:</strong> ${optimalWarehouse.efficiency}%\r\n          </p>\r\n          <p style=\"color: #6b7280; margin: 4px 0; font-size: 12px;\">\r\n            <strong>Coordinates:</strong> ${optimalWarehouse.lat.toFixed(4)}, ${optimalWarehouse.lng.toFixed(4)}\r\n          </p>\r\n        </div>\r\n      `;\r\n\r\n      warehouseMarker.bindPopup(warehousePopup);\r\n      markersRef.current.push(warehouseMarker);\r\n\r\n      // Draw lines from warehouse to all stores\r\n      stores.forEach(store => {\r\n        const line = L.polyline(\r\n          [[optimalWarehouse.lat, optimalWarehouse.lng], [store.lat, store.lng]], \r\n          {\r\n            color: '#ec4899',\r\n            weight: 2,\r\n            opacity: 0.7,\r\n            dashArray: '5, 10'\r\n          }\r\n        ).addTo(mapInstanceRef.current);\r\n        markersRef.current.push(line);\r\n      });\r\n    }\r\n\r\n    // Auto-fit bounds if there are stores\r\n    if (stores.length > 0) {\r\n      const group = new L.featureGroup(markersRef.current.filter(marker => marker instanceof L.Marker));\r\n      mapInstanceRef.current.fitBounds(group.getBounds().pad(0.1));\r\n    }\r\n  }, [stores, optimalWarehouse]);\r\n\r\n  // Map control functions\r\n  const zoomIn = () => {\r\n    if (mapInstanceRef.current) {\r\n      mapInstanceRef.current.zoomIn();\r\n    }\r\n  };\r\n\r\n  const zoomOut = () => {\r\n    if (mapInstanceRef.current) {\r\n      mapInstanceRef.current.zoomOut();\r\n    }\r\n  };\r\n\r\n  const resetView = () => {\r\n    if (mapInstanceRef.current && stores.length > 0) {\r\n      const group = new L.featureGroup(markersRef.current.filter(marker => marker instanceof L.Marker));\r\n      mapInstanceRef.current.fitBounds(group.getBounds().pad(0.1));\r\n    }\r\n  };\r\n\r\n  const focusOnOptimalWarehouse = () => {\r\n    if (mapInstanceRef.current && optimalWarehouse) {\r\n      mapInstanceRef.current.setView([optimalWarehouse.lat, optimalWarehouse.lng], 15, {\r\n        animate: true,\r\n        duration: 1\r\n      });\r\n    }\r\n  };\r\n\r\n  if (mapError) {\r\n    return (\r\n      <div className=\"map-error\">\r\n        <div className=\"error-content\">\r\n          <Navigation size={48} />\r\n          <h3>Map Loading Error</h3>\r\n          <p>{mapError}</p>\r\n          <button onClick={() => window.location.reload()}>\r\n            <RotateCcw size={16} />\r\n            Retry\r\n          </button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"enhanced-map-container\">\r\n      {isLoading && (\r\n        <motion.div \r\n          className=\"map-loading\"\r\n          initial={{ opacity: 0 }}\r\n          animate={{ opacity: 1 }}\r\n        >\r\n          <div className=\"loading-content\">\r\n            <div className=\"loading-spinner\" />\r\n            <p>Loading Interactive Map...</p>\r\n          </div>\r\n        </motion.div>\r\n      )}\r\n\r\n      <div \r\n        ref={mapRef} \r\n        className={`map-instance ${isLoading ? 'loading' : ''}`}\r\n        style={{ height: '100%', width: '100%' }}\r\n      />\r\n\r\n      {/* Map Controls */}\r\n      <div className=\"map-controls\">\r\n        <motion.button\r\n          className=\"map-control-btn zoom-in\"\r\n          onClick={zoomIn}\r\n          whileHover={{ scale: 1.05 }}\r\n          whileTap={{ scale: 0.95 }}\r\n          title=\"Zoom In\"\r\n        >\r\n          <ZoomIn size={18} />\r\n        </motion.button>\r\n\r\n        <motion.button\r\n          className=\"map-control-btn zoom-out\"\r\n          onClick={zoomOut}\r\n          whileHover={{ scale: 1.05 }}\r\n          whileTap={{ scale: 0.95 }}\r\n          title=\"Zoom Out\"\r\n        >\r\n          <ZoomOut size={18} />\r\n        </motion.button>\r\n\r\n        <motion.button\r\n          className=\"map-control-btn reset-view\"\r\n          onClick={resetView}\r\n          whileHover={{ scale: 1.05 }}\r\n          whileTap={{ scale: 0.95 }}\r\n          title=\"Reset View\"\r\n        >\r\n          <Target size={18} />\r\n        </motion.button>\r\n\r\n        {optimalWarehouse && (\r\n          <motion.button\r\n            className=\"map-control-btn focus-warehouse\"\r\n            onClick={focusOnOptimalWarehouse}\r\n            whileHover={{ scale: 1.05 }}\r\n            whileTap={{ scale: 0.95 }}\r\n            title=\"Focus on Optimal Warehouse\"\r\n          >\r\n            <Zap size={18} />\r\n          </motion.button>\r\n        )}\r\n      </div>\r\n\r\n      {/* Map Info */}\r\n      <div className=\"map-info\">\r\n        <div className=\"map-stats\">\r\n          <span className=\"stat\">\r\n            <MapPin size={14} />\r\n            {stores.length} Stores\r\n          </span>\r\n          {optimalWarehouse && (\r\n            <span className=\"stat optimal\">\r\n              <Warehouse size={14} />\r\n              Optimal Location Found\r\n            </span>\r\n          )}\r\n          <span className=\"stat\">\r\n            <Layers size={14} />\r\n            {mapView.charAt(0).toUpperCase() + mapView.slice(1)} View\r\n          </span>\r\n        </div>\r\n      </div>\r\n\r\n      <style jsx>{`\r\n        .enhanced-map-container {\r\n          position: relative;\r\n          width: 100%;\r\n          height: 100%;\r\n          border-radius: 20px;\r\n          overflow: hidden;\r\n          border: 1px solid rgba(102, 126, 234, 0.2);\r\n        }\r\n\r\n        .map-loading {\r\n          position: absolute;\r\n          top: 0;\r\n          left: 0;\r\n          right: 0;\r\n          bottom: 0;\r\n          background: rgba(26, 26, 46, 0.95);\r\n          display: flex;\r\n          align-items: center;\r\n          justify-content: center;\r\n          z-index: 1000;\r\n        }\r\n\r\n        .loading-content {\r\n          text-align: center;\r\n          color: white;\r\n        }\r\n\r\n        .loading-spinner {\r\n          width: 40px;\r\n          height: 40px;\r\n          border: 3px solid rgba(102, 126, 234, 0.3);\r\n          border-top: 3px solid #6366f1;\r\n          border-radius: 50%;\r\n          animation: spin 1s linear infinite;\r\n          margin: 0 auto 1rem;\r\n        }\r\n\r\n        .map-instance.loading {\r\n          opacity: 0.5;\r\n        }\r\n\r\n        .map-controls {\r\n          position: absolute;\r\n          top: 1rem;\r\n          right: 1rem;\r\n          display: flex;\r\n          flex-direction: column;\r\n          gap: 0.5rem;\r\n          z-index: 1000;\r\n        }\r\n\r\n        .map-control-btn {\r\n          width: 40px;\r\n          height: 40px;\r\n          background: rgba(255, 255, 255, 0.9);\r\n          border: none;\r\n          border-radius: 8px;\r\n          display: flex;\r\n          align-items: center;\r\n          justify-content: center;\r\n          cursor: pointer;\r\n          transition: all 0.3s ease;\r\n          color: #374151;\r\n          box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);\r\n          backdrop-filter: blur(10px);\r\n        }\r\n\r\n        .map-control-btn:hover {\r\n          background: rgba(255, 255, 255, 1);\r\n          box-shadow: 0 4px 12px rgba(0, 0, 0, 0.25);\r\n        }\r\n\r\n        .map-control-btn.focus-warehouse {\r\n          background: linear-gradient(135deg, #ec4899, #f472b6);\r\n          color: white;\r\n        }\r\n\r\n        .map-control-btn.focus-warehouse:hover {\r\n          background: linear-gradient(135deg, #db2777, #ec4899);\r\n        }\r\n\r\n        .map-info {\r\n          position: absolute;\r\n          bottom: 1rem;\r\n          left: 1rem;\r\n          right: 1rem;\r\n          z-index: 1000;\r\n        }\r\n\r\n        .map-stats {\r\n          display: flex;\r\n          gap: 1rem;\r\n          flex-wrap: wrap;\r\n        }\r\n\r\n        .stat {\r\n          background: rgba(255, 255, 255, 0.9);\r\n          backdrop-filter: blur(10px);\r\n          padding: 0.5rem 0.75rem;\r\n          border-radius: 8px;\r\n          font-size: 0.85rem;\r\n          font-weight: 500;\r\n          color: #374151;\r\n          display: flex;\r\n          align-items: center;\r\n          gap: 0.5rem;\r\n          box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\r\n        }\r\n\r\n        .stat.optimal {\r\n          background: linear-gradient(135deg, #ec4899, #f472b6);\r\n          color: white;\r\n        }\r\n\r\n        .map-error {\r\n          display: flex;\r\n          align-items: center;\r\n          justify-content: center;\r\n          height: 100%;\r\n          background: rgba(26, 26, 46, 0.95);\r\n          border-radius: 20px;\r\n          border: 1px solid rgba(102, 126, 234, 0.2);\r\n        }\r\n\r\n        .error-content {\r\n          text-align: center;\r\n          color: white;\r\n        }\r\n\r\n        .error-content h3 {\r\n          margin: 1rem 0 0.5rem;\r\n          color: #ef4444;\r\n        }\r\n\r\n        .error-content p {\r\n          margin-bottom: 1.5rem;\r\n          color: rgba(255, 255, 255, 0.7);\r\n        }\r\n\r\n        .error-content button {\r\n          display: flex;\r\n          align-items: center;\r\n          gap: 0.5rem;\r\n          padding: 0.75rem 1.5rem;\r\n          background: linear-gradient(135deg, #6366f1, #8b5cf6);\r\n          border: none;\r\n          border-radius: 8px;\r\n          color: white;\r\n          font-weight: 600;\r\n          cursor: pointer;\r\n          transition: all 0.3s ease;\r\n          margin: 0 auto;\r\n        }\r\n\r\n        .error-content button:hover {\r\n          box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);\r\n        }\r\n\r\n        @keyframes spin {\r\n          0% { transform: rotate(0deg); }\r\n          100% { transform: rotate(360deg); }\r\n        }\r\n\r\n        /* Custom Leaflet popup styling */\r\n        :global(.leaflet-popup-content-wrapper) {\r\n          background: white;\r\n          border-radius: 12px;\r\n          box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);\r\n          border: 1px solid rgba(102, 126, 234, 0.1);\r\n        }\r\n\r\n        :global(.leaflet-popup-tip) {\r\n          background: white;\r\n          border: 1px solid rgba(102, 126, 234, 0.1);\r\n        }\r\n\r\n        :global(.custom-div-icon) {\r\n          background: transparent !important;\r\n          border: none !important;\r\n        }\r\n\r\n        @media (max-width: 768px) {\r\n          .map-controls {\r\n            top: 0.5rem;\r\n            right: 0.5rem;\r\n          }\r\n\r\n          .map-control-btn {\r\n            width: 36px;\r\n            height: 36px;\r\n          }\r\n\r\n          .map-info {\r\n            bottom: 0.5rem;\r\n            left: 0.5rem;\r\n            right: 0.5rem;\r\n          }\r\n\r\n          .map-stats {\r\n            gap: 0.5rem;\r\n          }\r\n\r\n          .stat {\r\n            font-size: 0.8rem;\r\n            padding: 0.4rem 0.6rem;\r\n          }\r\n        }\r\n      `}</style>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default EnhancedMapComponent;\r\n"],"mappings":"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AAAxB,QAAA,EAAE;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IAAO;MAAAE,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAQ,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACP,CAAC;AAEV,CAAC;AAACpF,EAAA,CA/gBIN,oBAAoB;AAAA8G,EAAA,GAApB9G,oBAAoB;AAihB1B,eAAeA,oBAAoB;AAAC,IAAA8G,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}